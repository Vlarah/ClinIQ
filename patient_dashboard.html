<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SOAP Input - ClinIQ</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f9fbfc; margin: 0; }
    .container { max-width: 1000px; margin: auto; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 0 10px #ddd; }
    h2 { margin-top: 2rem; color: #444; }
    input, textarea, select { width: 100%; padding: 0.5rem; margin-top: 0.3rem; margin-bottom: 1rem; border-radius: 8px; border: 1px solid #ccc; }
    .row { display: flex; gap: 1rem; }
    .row > div { flex: 1; }
    .checkbox-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
    .form-section { margin-bottom: 2rem; }
    .bmi-result { font-weight: bold; color: #006699; }
    button { background: #00aaff; border: none; color: white; padding: 0.7rem 1.2rem; border-radius: 10px; cursor: pointer; }
    button:hover { background: #0077aa; }
  </style>
</head>
<body>
  <div class="container">
    <h1>SOAP Note Entry</h1>

    <form id="soapForm">
      <!-- SUBJECTIVE -->
      <div class="form-section">
        <h2>Subjective</h2>
        <label>History of Present Illness</label>
        <textarea name="hpi" rows="3"></textarea>

        <label>Past Medical History</label>
        <textarea name="pmh" rows="2"></textarea>

        <label>Family Medical History</label>
        <textarea name="famhx" rows="2"></textarea>

        <label>Social and Environmental History</label>
        <textarea name="socenvhx" rows="2"></textarea>

        <label>Review of Systems</label>
        <div class="checkbox-grid">
          <label><input type="checkbox" name="ros" value="Fever"> Fever</label>
          <label><input type="checkbox" name="ros" value="Cough"> Cough</label>
          <label><input type="checkbox" name="ros" value="Weight Loss"> Weight Loss</label>
          <label><input type="checkbox" name="ros" value="Headache"> Headache</label>
          <label><input type="checkbox" name="ros" value="Dizziness"> Dizziness</label>
          <label><input type="checkbox" name="ros" value="Fatigue"> Fatigue</label>
        </div>
      </div>

      <!-- OBJECTIVE -->
      <div class="form-section">
        <h2>Objective</h2>
        <div class="row">
          <div>
            <label>Height (cm)</label>
            <input type="number" id="height" name="height" oninput="computeBMI()">
          </div>
          <div>
            <label>Weight (kg)</label>
            <input type="number" id="weight" name="weight" oninput="computeBMI()">
          </div>
        </div>
        <div class="bmi-result" id="bmiDisplay"></div>

        <label>Vital Signs</label>
        <textarea name="vitals" placeholder="BP, HR, RR, Temp, O2 Sat..."></textarea>

        <label>Physical Examination</label>
        <div class="checkbox-grid">
          <label><input type="checkbox" value="HEENT Normal"> HEENT</label>
          <label><input type="checkbox" value="Lungs Clear"> Lungs</label>
          <label><input type="checkbox" value="Heart Sounds Normal"> Heart</label>
          <label><input type="checkbox" value="Abdomen Soft"> Abdomen</label>
          <label><input type="checkbox" value="Extremities WNL"> Extremities</label>
        </div>
        <label>Other Findings</label>
        <textarea name="pe_other" rows="2"></textarea>

        <label>Labs & Imaging</label>
        <textarea name="labs" rows="2"></textarea>
      </div>

      <!-- ASSESSMENT -->
      <div class="form-section">
        <h2>Assessment</h2>
        <textarea name="assessment" rows="3"></textarea>
      </div>

      <!-- PLAN -->
      <div class="form-section">
        <h2>Plan</h2>
        <textarea name="plan" rows="3"></textarea>
      </div>

      <button type="submit">Save Visit</button>
    </form>
  </div>

  <script>
    function computeBMI() {
      const h = parseFloat(document.getElementById("height").value);
      const w = parseFloat(document.getElementById("weight").value);
      if (!h || !w || h <= 0 || w <= 0) {
        document.getElementById("bmiDisplay").textContent = "";
        return;
      }
      const heightM = h / 100;
      const bmi = w / (heightM * heightM);
      let category = "";
      if (bmi < 18.5) category = "Underweight";
      else if (bmi < 23) category = "Normal";
      else if (bmi < 25) category = "Overweight";
      else category = "Obese";

      document.getElementById("bmiDisplay").textContent = `BMI: ${bmi.toFixed(1)} (${category})`;
    }
  </script>
</body>
</html>
